<!DOCTYPE html>
<html>

<head>
    <meta property="og:title" content="Logo playground" />
    <meta property="og:description" content="Online environment for programming with Logo language" />
    <meta property="og:image" content="content/images/logo-logo.png" />

    <!-- Global site tag (gtag.js) - Google Analytics -->
    {{#if htmlWebpackPlugin.options.variables.appConfig.services.googleAnalyticsTrackingId}}
    <script async src="https://www.googletagmanager.com/gtag/js?id={{htmlWebpackPlugin.options.variables.appConfig.services.googleAnalyticsTrackingId}}"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', '{{htmlWebpackPlugin.options.variables.appConfig.services.googleAnalyticsTrackingId}}');
    </script> {{/if}}

    <title>Logo playground</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <link href="content/favicon.ico" rel="icon" type="image/x-icon" />

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inconsolata:400,700&amp;subset=latin-ext">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

    <script src="https://apis.google.com/js/api.js"></script>

    <link href="content/css/codemirror/codemirror.css" rel="stylesheet">
    <link href="content/css/golden-layout/goldenlayout-base.css" rel="stylesheet">
    <meta id="theme_styles_inserted_straight_before_this_element">
</head>

<body style="margin:0px;">
    <div id="app-container">
        <div style="text-align:center;margin-top:100px;">
            <img style="width:200px;" src="content/images/logo-logo.svg" alt="logo" />
        </div>
    </div>

    <script type="text/javascript">
        var appThemeNameLocalStorageKey = 'logolang-app-uitheme';
        var defaultTheme = {
            name: "Default",
            description: "Bulma as-is",
            bodyClass: "is-light",
            isDark: false,
            codeEditorThemeName: "eclipse",
            styleLinks: [
                "content/css/bulma/default/bulmaswatch.min.css",
                "content/css/codemirror/themes/eclipse.css",
                "content/css/golden-layout/goldenlayout-light-theme.css"
            ]
        };

        function getActiveTheme() {
            try {
                var storedThemeJSON = window.localStorage.getItem(appThemeNameLocalStorageKey);
                if (storedThemeJSON) {
                    var parsedTheme = JSON.parse(storedThemeJSON);
                    if (parsedTheme.styleLinks && Array.isArray(parsedTheme.styleLinks)) {
                        return parsedTheme;
                    }
                }
            }
            catch (ex) {
            }
        }

        function injectCssLink(linkUrl, themeName) {
            var link = document.createElement('link');
            link.setAttribute('data-theme-name', themeName);
            link.setAttribute('rel', 'stylesheet');
            link.setAttribute('type', 'text/css');
            link.setAttribute('href', linkUrl + '?{{htmlWebpackPlugin.options.variables.appGitVersion}}');
            const insertAfterElement = document.getElementById('theme_styles_inserted_straight_before_this_element');
            insertAfterElement.parentElement.insertBefore(link, insertAfterElement);
        }

        function activateTheme(theme, isFirstTime) {
            window.localStorage.setItem(appThemeNameLocalStorageKey, JSON.stringify(theme));
            document.body.className = theme.bodyClass;
            theme.styleLinks.forEach(x => injectCssLink(x, theme.name));
            if (!isFirstTime) {
                // remove old theme files
                setTimeout(() => {
                    var themeLinks = document.querySelectorAll("[data-theme-name]");
                    for (var i = 0; i < themeLinks.length; ++i) {
                        if (themeLinks[i].getAttribute("data-theme-name") !== theme.name) {
                            themeLinks[i].remove();
                        }
                    }
                }, 1000);
            }
        }
        window.themeManager = {
            activateTheme: activateTheme,
            getActiveTheme: getActiveTheme,
            defaultTheme: defaultTheme
        };

        var theme = getActiveTheme() || defaultTheme;
        activateTheme(theme, true);
    </script>

    <script src="vendor.js?{{htmlWebpackPlugin.options.variables.appGitVersion}}"></script>

    <!--styles-->
    {{#each htmlWebpackPlugin.files.css}}
    <link href="{{this}}?{{../htmlWebpackPlugin.options.variables.appGitVersion}}" rel="stylesheet" /> {{/each}}

    <!--scripts-->
    {{#each htmlWebpackPlugin.files.chunks}}
    <script src="{{this.entry}}?{{../htmlWebpackPlugin.options.variables.appGitVersion}}"></script> {{/each}}

    <script>
        app.run();
    </script>
</body>

</html>